server {
    # IPv4とIPv6の両方でリッスン
    listen 80;
    listen [::]:80;
    
    # サーバー名（必要に応じて変更）
    server_name localhost;

    # ルートディレクトリ
    root /usr/share/nginx/html;
    index index.html;

    # /portal パスでのアクセス
    location /portal {
        alias /usr/share/nginx/html;
        try_files $uri $uri/ /portal/index.html;
        
        # 静的ファイルのキャッシュ設定
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
    }

    # 画像ファイルの直接アクセス
    location /images {
        alias /usr/share/nginx/html/images;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # エラーページ
    error_page 404 /portal/index.html;
    
    # ログ設定
    access_log /var/log/nginx/portal_access.log;
    error_log /var/log/nginx/portal_error.log;
}

